import{c as y}from"./config-0fcvTnOY.js";import{k as v,d as A,r as f,c as N,a as c,f as m,t as V,b as h,w as F,V as P,e as $,o as O,u as E}from"./index-muHDeLuO.js";import{I as L}from"./search-C9OWVwnU.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";async function G(){try{const e=await y.get("/api/v1/profiles/admin/statistics",{headers:{Authorization:`Bearer ${v("accessToken")}`,"Content-Type":"application/json"}});return e==null?void 0:e.data}catch{return null}}async function H(){try{const e=await y.get("/api/v1/transactions/admin/statistics",{headers:{Authorization:`Bearer ${v("accessToken")}`,"Content-Type":"application/json"}});return e==null?void 0:e.data}catch{return null}}async function J(){try{const e=await y.get("/api/v1/bets/admin/statistics",{headers:{Authorization:`Bearer ${v("accessToken")}`,"Content-Type":"application/json"}});return e==null?void 0:e.data}catch{return null}}const K={class:"page-content"},M={class:"content stats-wrapper"},Q={class:"title-block"},R={class:"title-2"},W={class:"title-2"},X=A({__name:"Statistics",setup(e){const d=f(""),p=f([]),u=f({allBalance:"",allUsersCount:""});async function x(){var _,g,k,w,b,C,I,B,T,S,U;const a=await G(),s=await H(),i=await J(),l=a==null?void 0:a.users,r=s==null?void 0:s.balances,n=i==null?void 0:i.bets;if(l&&r&&n){const o={};for(let t=0;t<l.length;t++)o[(_=l[t])==null?void 0:_.id]=l[t];for(let t=0;t<r.length;t++)((g=r[t])==null?void 0:g.userId)in o&&(o[(k=r[t])==null?void 0:k.userId].amount=(w=r[t])==null?void 0:w.amount);for(let t=0;t<n.length;t++)((b=n[t])==null?void 0:b.userId)in o&&(o[(C=n[t])==null?void 0:C.userId].betsCount=(I=n[t])==null?void 0:I.count,o[(B=n[t])==null?void 0:B.userId].totalPrize=(T=n[t])==null?void 0:T.totalPrize,o[(S=n[t])==null?void 0:S.userId].won=(U=n[t])==null?void 0:U.won);p.value=Object.values(o)}p.value=a==null?void 0:a.users,u.value.allUsersCount=a==null?void 0:a.count,u.value.allBalance=z(r)}function z(a){return Array.isArray(a)?a.reduce((i,l)=>i+ +l.amount,0).toFixed(2):""}const j=[{title:"ID",key:"id"},{title:"Имя",key:"name"},{title:"Фамилия",key:"surname"},{title:"Ставок",key:"betsCount"},{title:"Выигранных",key:"won"},{title:"Выигрыш",key:"totalPrize"},{title:"Баланс",key:"amount"}];return x(),(a,s)=>(O(),N("div",K,[c("section",M,[c("div",Q,[c("p",R,[s[1]||(s[1]=m(" Пользователей: ")),c("span",null,V(u.value.allUsersCount),1)]),c("p",W,[s[2]||(s[2]=m(" На счетах: ")),c("span",null,V(u.value.allBalance),1),s[3]||(s[3]=m(" TON "))]),h(P,{"hide-details":"",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=i=>d.value=i),class:"search-input","max-width":"470",label:"Search",variant:"underlined"},{"append-inner":F(()=>[h(E(L))]),_:1},8,["modelValue"])]),h($,{headers:j,items:p.value,search:d.value},null,8,["items","search"])])]))}}),et=q(X,[["__scopeId","data-v-6e39456f"]]);export{et as default};
